<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>אזור אישי</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  
  <script type="module" src="js/personal-area.js"></script>
  
  <style>
    .navbar { z-index: 1050 !important; }
    .navbar-nav .nav-link { font-size: 16px; font-weight: 500; margin: 0 10px; }
    .navbar-nav .nav-link.active { background-color: rgba(255,255,255,0.2); border-radius: 5px; }
    
    /* כפתורי בקרה */
    .control-btn { position: relative; border-radius: 15px !important; font-weight: 600; font-size: 14px; padding: 12px 20px; transition: all 0.3s ease; border: 2px solid; box-shadow: 0 4px 8px rgba(0,0,0,0.1); min-height: 60px; display: flex; align-items: center; justify-content: center; gap: 8px; }
    .control-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
    .control-btn:active { transform: translateY(0); }
    
    .pump-btn-off { background: linear-gradient(45deg, #cce7ff, #f8f9fa); border-color: #0d6efd; color: #084298; }
    .pump-btn-on { background: linear-gradient(45deg, #0d6efd, #0b5ed7); border-color: #0b5ed7; color: #fff; box-shadow: 0 4px 15px rgba(13, 110, 253, 0.4); }
    
    .fan-btn-off { background: linear-gradient(45deg, #d1ecf1, #f8f9fa); border-color: #17a2b8; color: #0c5460; }
    .fan-btn-on { background: linear-gradient(45deg, #17a2b8, #138496); border-color: #138496; color: #fff; box-shadow: 0 4px 15px rgba(23, 162, 184, 0.4); }
    
    .control-card { border: none; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); transition: transform 0.3s ease; overflow: hidden; background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%); height: 100%; }
    .control-card .card-body { padding: 25px; }
    .control-card .card-title { color: #2c3e50; font-weight: 600; margin-bottom: 15px; font-size: 1.1rem; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-success fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">
        <img src="img/לוגו אדנית שקוף.png" alt="לוגו" style="max-height:80px; width:auto;">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">בית</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html">אודות</a></li>
          <li class="nav-item"><a class="nav-link" href="gallery.html">גלריה</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">צור קשר</a></li>
          <li class="nav-item"><a class="nav-link active" href="personal-area.html">אזור אישי</a></li>
          <li class="nav-item" id="nav-login"><a class="nav-link" href="login/login.html">התחברות</a></li>
          <li class="nav-item" id="nav-profile" style="display: none;"><a class="nav-link" href="profile.html">פרופיל</a></li>
          <li class="nav-item" id="nav-logout" style="display: none;"><a class="nav-link" href="#" onclick="globalLogout()">התנתקות</a></li>
        </ul>
      </div>
    </div>
  </nav>
  
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNav" aria-labelledby="offcanvasNavLabel" 
       style="background-color: #4caf50; width: 60%; z-index: 2000;">
       <div class="offcanvas-header">
        <h5 class="offcanvas-title text-white">תפריט</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
      </div>
      <div class="offcanvas-body">
        <ul style="list-style: none; padding: 0;">
            <li class="py-3 border-bottom border-white-50"><a href="index.html" class="text-white text-decoration-none">בית</a></li>
            <li class="py-3 border-bottom border-white-50"><a href="personal-area.html" class="text-white text-decoration-none">אזור אישי</a></li>
            <li class="py-3"><a href="login/login.html" class="text-white text-decoration-none">התחברות</a></li>
        </ul>
      </div>
  </div>

  <div style="height: 80px;"></div>

  <main class="container my-4" style="padding-top: 20px;">
    
    <div class="row mb-4">
      <div class="col-12">
        <div class="card bg-success text-white">
          <div class="card-body text-center">
            <h2 class="card-title mb-2">ברוכים הבאים לאזור האישי</h2>
            <p class="card-text">שלטו באדנית החכמה שלכם בקלות ובנוחות</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">בקרת רכיבים</h5>
          </div>
          <div class="card-body">
            <div class="row g-4 justify-content-center">
              
              <div class="col-md-6">
                <div class="card control-card text-center">
                  <div class="card-body">
                    <h6 class="card-title">משאבת מים</h6>
                    <button id="btn-pump" class="btn control-btn pump-btn-off w-100">
                      <span id="pumpText">משאבה כבויה</span>
                    </button>
                  </div>
                </div>
              </div>
              
              <div class="col-md-6">
                <div class="card control-card text-center">
                  <div class="card-body">
                    <h6 class="card-title">מאוורר</h6>
                    <button id="btn-fan" class="btn control-btn fan-btn-off w-100">
                      <span id="fanText">מאוורר כבוי</span>
                    </button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">סטטוס חיישנים בזמן אמת</h5>
          </div>
          <div class="card-body">
            <div class="row g-4 text-center justify-content-center">
              
              <div class="col-12 col-md-4">
                <div class="p-3 border rounded bg-light h-100 shadow-sm">
                  <h6 class="mt-2">לחות אדמה</h6>
                  <h4 id="sensor-soil">--%</h4>
                </div>
              </div>

              <div class="col-12 col-md-4">
                <div class="p-3 border rounded bg-light h-100 shadow-sm">
                   <h6 class="mt-2">מפלס מים</h6>
                  <h4 id="sensor-water">--%</h4>
                </div>
              </div>

              <div class="col-12 col-md-4">
                <div class="p-3 border rounded bg-light h-100 shadow-sm">
                   <h6 class="mt-2">מרחק</h6>
                  <h4 id="sensor-dist">-- cm</h4>
                </div>
              </div>

              <div class="col-12 col-md-6">
                <div class="p-3 border rounded bg-light h-100 shadow-sm">
                   <h6 class="mt-2">טמפרטורה</h6>
                  <h4 id="sensor-temp">--°C</h4>
                </div>
              </div>

              <div class="col-12 col-md-6">
                <div class="p-3 border rounded bg-light h-100 shadow-sm">
                   <h6 class="mt-2">לחות אוויר</h6>
                  <h4 id="sensor-humidity">--%</h4>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-center mb-4">
      <div class="col-lg-8">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">מצלמה בשידור חי</h5>
            <span id="cam-status" class="badge bg-secondary">מתחבר...</span>
          </div>
          <div class="card-body text-center">
            <div class="ratio ratio-16x9 bg-dark rounded overflow-hidden">
              <img id="camera-stream" src="" crossorigin="anonymous" alt="המצלמה לא מחוברת" style="object-fit: contain; width: 100%; height: 100%;">
            </div>
            
            <p class="mt-2 text-muted small">
              כתובת IP: <span id="ip-display">--</span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">מידע על המערכת</h5>
          </div>
          <div class="card-body">
            <p class="card-text">
              מערכת האדנית החכמה מאפשרת לכם לשלוט בהשקיה ואוורור מרחוק.
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="bg-success text-white text-center p-3 mt-4">
    <p>© 2025 כל הזכויות שמורות.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/script.js"></script>
  <script type="module" src="js/navbar-auth.js"></script>
  <script type="module" src="js/personal-area.js"></script>
</body>
</html>